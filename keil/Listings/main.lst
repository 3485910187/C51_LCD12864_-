C51 COMPILER V9.59.0.0   MAIN                                                              03/01/2023 15:34:43 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\keil) DEBUG OBJECTEXTEND PRINT
                    -(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include"reg51.h"
   2          #include"12864.h"
   3          #include"keyboard.h"
   4          #include"sht11.h"
   5          
   6          uchar display_password[6]={10,10,10,10,10,10};
   7          uchar password[]={1,2,3,4,5,6};
   8          
   9          char* prt_password=display_password;
  10          uchar mode = 0,error = 0;
  11          int Temperature = 0,Humidity = 0;
  12          
  13          void scan_key()
  14          {
  15   1        uchar keydata = 0;
  16   1        uint i = 0,flag = 0;
  17   1        if(get_key() != 0xff)
  18   1        {
  19   2          keydata = get_key();
  20   2          while(get_key() != 0xff);
  21   2        }
  22   1        if(keydata > '0' && keydata < '9' && display_password[5] == 10) //密码
  23   1        {
  24   2          *prt_password++=keydata-'0';
  25   2        }
  26   1        else if(keydata == '*') //确定
  27   1        {
  28   2          for(i=0;i<6;i++)
  29   2          {
  30   3            if(display_password[i] != password[i])flag = 1;
  31   3          }
  32   2          if(flag == 1)
  33   2          {
  34   3            error++; //密码错误
  35   3          }
  36   2          else 
  37   2          {
  38   3            mode = 1; //密码正确
  39   3            error = 0;
  40   3            ClearScreen(0);
  41   3          }
  42   2          if(error == 3)
  43   2          {
  44   3            mode = 2; //锁定
  45   3            ClearScreen(0);
  46   3          }
  47   2          for(i=0;i<6;i++)
  48   2          {
  49   3            display_password[i] = 10;
  50   3          }
  51   2          prt_password=display_password;
  52   2        }
  53   1        else if(keydata == '#') //取消
  54   1        {
C51 COMPILER V9.59.0.0   MAIN                                                              03/01/2023 15:34:43 PAGE 2   

  55   2          for(i=0;i<6;i++)
  56   2          {
  57   3            display_password[i] = 10;
  58   3          }
  59   2          prt_password=display_password;
  60   2        }
  61   1        else if(keydata == 'A' && error < 3) //关闭密码箱
  62   1        {
  63   2          mode = 0;
  64   2          error = 0;
  65   2          ClearScreen(0);
  66   2        }
  67   1        else if(keydata == 'B')
  68   1        {
  69   2          mode = 0;
  70   2          error = 0;
  71   2          ClearScreen(0);   
  72   2        }
  73   1      }
  74          
  75          
  76          void main()
  77          {
  78   1        InitLCD();
  79   1        while(1)
  80   1        {
  81   2          //第一行
  82   2          Display_ZM(1,0,8*0,19);
  83   2          Display_FH(1,0,8*1,4);
  84   2          Display_SZ(1,0,8*2,Temperature/100);
  85   2          Display_SZ(1,0,8*3,(Temperature/10)%10);
  86   2          Display_FH(1,0,8*4,11);
  87   2          Display_SZ(1,0,8*5,Temperature%10);   
  88   2          Display_HZ(1,0,8*6,16); 
  89   2          
  90   2          Display_ZM(2,0,8*0,7);
  91   2          Display_FH(2,0,8*1,4);
  92   2          Display_SZ(2,0,8*2,Humidity/100);
  93   2          Display_SZ(2,0,8*3,(Humidity/10)%10);   
  94   2          Display_FH(2,0,8*4,11);
  95   2          Display_SZ(2,0,8*5,Humidity%10);  
  96   2          Display_FH(2,0,8*6,7);
  97   2          
  98   2          //第二行
  99   2          if(mode == 0 || mode == 1)
 100   2          {
 101   3            Display_HZ(1,2,16*0,0);
 102   3            Display_HZ(1,2,16*1,1);
 103   3            Display_HZ(1,2,16*2,2);
 104   3            Display_FH(1,2,16*3,4);   
 105   3            Display_SZ(1,2,16*3+8,0);
 106   3            
 107   3            Display_SZ(2,2,8*0,0);
 108   3            Display_SZ(2,2,8,1);    
 109   3          }
 110   2          else if(mode == 2)
 111   2          {
 112   3            Display_HZ(1,2,16*2,12);
 113   3            Display_HZ(1,2,16*3,13);  
 114   3            
 115   3            Display_HZ(2,2,16*0,14);    
 116   3            Display_HZ(2,2,16*1,15);        
C51 COMPILER V9.59.0.0   MAIN                                                              03/01/2023 15:34:43 PAGE 3   

 117   3          }
 118   2          
 119   2          //第三行
 120   2          if(mode == 0)
 121   2          {
 122   3            Display_SZ(1,4,8*0,display_password[0]);
 123   3            Display_SZ(1,4,8*1,display_password[1]);
 124   3            Display_SZ(1,4,8*2,display_password[2]);
 125   3            Display_SZ(1,4,8*3,display_password[3]);
 126   3            Display_SZ(1,4,8*4,display_password[4]);
 127   3            Display_SZ(1,4,8*5,display_password[5]);    
 128   3            
 129   3            Display_SZ(2,4,16*3,error);
 130   3          }
 131   2          else if(mode == 1)
 132   2          {
 133   3            Display_HZ(1,4,16*0,0);
 134   3            Display_HZ(1,4,16*1,1);
 135   3            Display_HZ(1,4,16*2,2);   
 136   3            Display_HZ(1,4,16*3,3);   
 137   3            
 138   3            Display_HZ(2,4,16*0,4);   
 139   3            Display_HZ(2,4,16*1,5);         
 140   3          }
 141   2          else if(mode == 2)
 142   2          {
 143   3            Display_HZ(1,4,16*1,0);
 144   3            Display_HZ(1,4,16*2,1);
 145   3            Display_HZ(1,4,16*3,2);   
 146   3            
 147   3            Display_HZ(2,4,16*0,3);   
 148   3            Display_HZ(2,4,16*1,6);   
 149   3            Display_HZ(2,4,16*2,7);       
 150   3          } 
 151   2          
 152   2          //第四行
 153   2          if(mode == 0)
 154   2          {
 155   3            Display_HZ(1,6,16*0,8);
 156   3            Display_HZ(1,6,16*1,9); 
 157   3      
 158   3            Display_HZ(2,6,16*2,10);
 159   3            Display_HZ(2,6,16*3,11);  
 160   3          }
 161   2          
 162   2          TH_output(&Temperature,&Humidity);
 163   2          scan_key();
 164   2      
 165   2        }
 166   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    958    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     21       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
