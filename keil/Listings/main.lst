C51 COMPILER V9.59.0.0   MAIN                                                              03/02/2023 13:29:01 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\keil) DEBUG OBJECTEXTEND PRINT
                    -(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include"reg51.h"
   2          #include"12864.h"
   3          #include"keyboard.h"
   4          #include"sht11.h"
   5          #include"motor.h"
   6          
   7          uchar display_password[6]={10,10,10,10,10,10};
   8          uchar password[]={1,2,3,4,5,6};
   9          
  10          char* prt_password=display_password;
  11          uchar mode = 0,error = 0;
  12          int Temperature = 0,Humidity = 0;
  13          
  14          void scan_key()
  15          {
  16   1        uchar keydata = 0;
  17   1        uint i = 0,flag = 0;
  18   1        if(get_key() != 0xff)
  19   1        {
  20   2          keydata = get_key();
  21   2          while(get_key() != 0xff);
  22   2        }
  23   1        if(keydata > '0' && keydata < '9' && display_password[5] == 10) //密码
  24   1        {
  25   2          *prt_password++=keydata-'0';
  26   2        }
  27   1        else if(keydata == '*') //确定
  28   1        {
  29   2          for(i=0;i<6;i++)
  30   2          {
  31   3            if(display_password[i] != password[i])flag = 1;
  32   3          }
  33   2          if(flag == 1)
  34   2          {
  35   3            error++; //密码错误
  36   3          }
  37   2          else 
  38   2          {
  39   3            mode = 1; //密码正确
  40   3            error = 0;
  41   3            ClearScreen(0);
  42   3          }
  43   2          if(error == 3)
  44   2          {
  45   3            mode = 2; //锁定
  46   3            ClearScreen(0);
  47   3          }
  48   2          for(i=0;i<6;i++)
  49   2          {
  50   3            display_password[i] = 10;
  51   3          }
  52   2          prt_password=display_password;
  53   2        }
  54   1        else if(keydata == '#') //取消
C51 COMPILER V9.59.0.0   MAIN                                                              03/02/2023 13:29:01 PAGE 2   

  55   1        {
  56   2          for(i=0;i<6;i++)
  57   2          {
  58   3            display_password[i] = 10;
  59   3          }
  60   2          prt_password=display_password;
  61   2        }
  62   1        else if(keydata == 'A' && error < 3) //关闭密码箱
  63   1        {
  64   2          mode = 0;
  65   2          error = 0;
  66   2          ClearScreen(0);
  67   2        }
  68   1        else if(keydata == 'B')
  69   1        {
  70   2          mode = 0;
  71   2          error = 0;
  72   2          ClearScreen(0);   
  73   2        }
  74   1      }
  75          
  76          
  77          void main()
  78          {
  79   1        InitLCD();
  80   1        while(1)
  81   1        {
  82   2          //第一行
  83   2          Display_ZM(1,0,8*0,19);
  84   2          Display_FH(1,0,8*1,4);
  85   2          Display_SZ(1,0,8*2,Temperature/100);
  86   2          Display_SZ(1,0,8*3,(Temperature/10)%10);
  87   2          Display_FH(1,0,8*4,11);
  88   2          Display_SZ(1,0,8*5,Temperature%10);   
  89   2          Display_HZ(1,0,8*6,16); 
  90   2          
  91   2          Display_ZM(2,0,8*0,7);
  92   2          Display_FH(2,0,8*1,4);
  93   2          Display_SZ(2,0,8*2,Humidity/100);
  94   2          Display_SZ(2,0,8*3,(Humidity/10)%10);   
  95   2          Display_FH(2,0,8*4,11);
  96   2          Display_SZ(2,0,8*5,Humidity%10);  
  97   2          Display_FH(2,0,8*6,7);
  98   2          
  99   2          //第二行
 100   2          if(mode == 0 || mode == 1)
 101   2          {
 102   3            Display_HZ(1,2,16*0,0);
 103   3            Display_HZ(1,2,16*1,1);
 104   3            Display_HZ(1,2,16*2,2);
 105   3            Display_FH(1,2,16*3,4);   
 106   3            Display_SZ(1,2,16*3+8,0);
 107   3            
 108   3            Display_SZ(2,2,8*0,0);
 109   3            Display_SZ(2,2,8,1);    
 110   3          }
 111   2          else if(mode == 2)
 112   2          {
 113   3            Display_HZ(1,2,16*2,12);
 114   3            Display_HZ(1,2,16*3,13);  
 115   3            
 116   3            Display_HZ(2,2,16*0,14);    
C51 COMPILER V9.59.0.0   MAIN                                                              03/02/2023 13:29:01 PAGE 3   

 117   3            Display_HZ(2,2,16*1,15);        
 118   3          }
 119   2          
 120   2          //第三行
 121   2          if(mode == 0)
 122   2          {
 123   3            Display_SZ(1,4,8*0,display_password[0]);
 124   3            Display_SZ(1,4,8*1,display_password[1]);
 125   3            Display_SZ(1,4,8*2,display_password[2]);
 126   3            Display_SZ(1,4,8*3,display_password[3]);
 127   3            Display_SZ(1,4,8*4,display_password[4]);
 128   3            Display_SZ(1,4,8*5,display_password[5]);    
 129   3            
 130   3            Display_SZ(2,4,16*3,error);
 131   3          }
 132   2          else if(mode == 1)
 133   2          {
 134   3            Display_HZ(1,4,16*0,0);
 135   3            Display_HZ(1,4,16*1,1);
 136   3            Display_HZ(1,4,16*2,2);   
 137   3            Display_HZ(1,4,16*3,3);   
 138   3            
 139   3            Display_HZ(2,4,16*0,4);   
 140   3            Display_HZ(2,4,16*1,5);         
 141   3          }
 142   2          else if(mode == 2)
 143   2          {
 144   3            Display_HZ(1,4,16*1,0);
 145   3            Display_HZ(1,4,16*2,1);
 146   3            Display_HZ(1,4,16*3,2);   
 147   3            
 148   3            Display_HZ(2,4,16*0,3);   
 149   3            Display_HZ(2,4,16*1,6);   
 150   3            Display_HZ(2,4,16*2,7);       
 151   3          } 
 152   2          
 153   2          //第四行
 154   2          if(mode == 0)
 155   2          {
 156   3            Display_HZ(1,6,16*0,8);
 157   3            Display_HZ(1,6,16*1,9); 
 158   3      
 159   3            Display_HZ(2,6,16*2,10);
 160   3            Display_HZ(2,6,16*3,11);  
 161   3          }
 162   2          
 163   2          TH_output(&Temperature,&Humidity);
 164   2          scan_key();
 165   2      //    motor_angle(360);
 166   2      //    motor_direction(1,4000);
 167   2      
 168   2        }
 169   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    958    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     21       5
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.59.0.0   MAIN                                                              03/02/2023 13:29:01 PAGE 4   

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
