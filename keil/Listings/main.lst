C51 COMPILER V9.59.0.0   MAIN                                                              02/27/2023 11:27:35 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include"reg51.h"
   2          #include"12864.h"
   3          #include"keyboard.h"
   4          #include"18b20.h"
   5          
   6          uchar display_password[6]={10,10,10,10,10,10};
   7          uchar password[]={1,2,3,4,5,6};
   8          
   9          char* prt_password=display_password;
  10          uchar mode = 0,error = 0;
  11          uchar Temperature = 0;
  12          
  13          void scan_key()
  14          {
  15   1        uchar keydata = 0;
  16   1        uint i = 0,flag = 0;
  17   1        if(get_key() != 0xff)
  18   1        {
  19   2          keydata = get_key();
  20   2          while(get_key() != 0xff);
  21   2        }
  22   1        if(keydata > '0' && keydata < '9' && display_password[5] == 10) //密码
  23   1        {
  24   2          *prt_password++=keydata-'0';
  25   2        }
  26   1        else if(keydata == '*') //确定
  27   1        {
  28   2          for(i=0;i<6;i++)
  29   2          {
  30   3            if(display_password[i] != password[i])flag = 1;
  31   3          }
  32   2          if(flag == 1)
  33   2          {
  34   3            error++; //密码错误
  35   3          }
  36   2          else 
  37   2          {
  38   3            mode = 1; //密码正确
  39   3            error = 0;
  40   3            ClearScreen(0);
  41   3          }
  42   2          if(error == 3)
  43   2          {
  44   3            mode = 2; //锁定
  45   3            ClearScreen(0);
  46   3          }
  47   2          for(i=0;i<6;i++)
  48   2          {
  49   3            display_password[i] = 10;
  50   3          }
  51   2          prt_password=display_password;
  52   2        }
  53   1        else if(keydata == '#') //取消
  54   1        {
C51 COMPILER V9.59.0.0   MAIN                                                              02/27/2023 11:27:35 PAGE 2   

  55   2          for(i=0;i<6;i++)
  56   2          {
  57   3            display_password[i] = 10;
  58   3          }
  59   2          prt_password=display_password;
  60   2        }
  61   1        else if(keydata == 'A' && error < 3) //关闭密码箱
  62   1        {
  63   2          mode = 0;
  64   2          error = 0;
  65   2          ClearScreen(0);
  66   2        }
  67   1        else if(keydata == 'B')
  68   1        {
  69   2          mode = 0;
  70   2          error = 0;
  71   2          ClearScreen(0);   
  72   2        }
  73   1      }
  74          
  75          
  76          void main()
  77          {
  78   1        InitLCD();
  79   1        while(1)
  80   1        {
  81   2          //第一行
  82   2          Display_ZM(1,0,8*0,19);
  83   2          Display_FH(1,0,8*1,4);
  84   2          Display_SZ(1,0,8*2,Temperature/10);
  85   2          Display_SZ(1,0,8*3,Temperature%10);
  86   2          Display_HZ(1,0,8*4,16); 
  87   2          
  88   2          Display_ZM(2,0,8*0,7);
  89   2          Display_FH(2,0,8*1,4);
  90   2          Display_SZ(2,0,8*2,0);
  91   2          Display_SZ(2,0,8*3,0);    
  92   2          Display_FH(2,0,8*4,7);
  93   2          
  94   2          //第二行
  95   2          if(mode == 0 || mode == 1)
  96   2          {
  97   3            Display_HZ(1,2,16*0,0);
  98   3            Display_HZ(1,2,16*1,1);
  99   3            Display_HZ(1,2,16*2,2);
 100   3            Display_FH(1,2,16*3,4);   
 101   3            Display_SZ(1,2,16*3+8,0);
 102   3            
 103   3            Display_SZ(2,2,8*0,0);
 104   3            Display_SZ(2,2,8,1);    
 105   3          }
 106   2          else if(mode == 2)
 107   2          {
 108   3            Display_HZ(1,2,16*2,12);
 109   3            Display_HZ(1,2,16*3,13);  
 110   3            
 111   3            Display_HZ(2,2,16*0,14);    
 112   3            Display_HZ(2,2,16*1,15);        
 113   3          }
 114   2          
 115   2          //第三行
 116   2          if(mode == 0)
C51 COMPILER V9.59.0.0   MAIN                                                              02/27/2023 11:27:35 PAGE 3   

 117   2          {
 118   3            Display_SZ(1,4,8*0,display_password[0]);
 119   3            Display_SZ(1,4,8*1,display_password[1]);
 120   3            Display_SZ(1,4,8*2,display_password[2]);
 121   3            Display_SZ(1,4,8*3,display_password[3]);
 122   3            Display_SZ(1,4,8*4,display_password[4]);
 123   3            Display_SZ(1,4,8*5,display_password[5]);    
 124   3            
 125   3            Display_SZ(2,4,16*3,error);
 126   3          }
 127   2          else if(mode == 1)
 128   2          {
 129   3            Display_HZ(1,4,16*0,0);
 130   3            Display_HZ(1,4,16*1,1);
 131   3            Display_HZ(1,4,16*2,2);   
 132   3            Display_HZ(1,4,16*3,3);   
 133   3            
 134   3            Display_HZ(2,4,16*0,4);   
 135   3            Display_HZ(2,4,16*1,5);         
 136   3          }
 137   2          else if(mode == 2)
 138   2          {
 139   3            Display_HZ(1,4,16*1,0);
 140   3            Display_HZ(1,4,16*2,1);
 141   3            Display_HZ(1,4,16*3,2);   
 142   3            
 143   3            Display_HZ(2,4,16*0,3);   
 144   3            Display_HZ(2,4,16*1,6);   
 145   3            Display_HZ(2,4,16*2,7);       
 146   3          } 
 147   2          
 148   2          //第四行
 149   2          if(mode == 0)
 150   2          {
 151   3            Display_HZ(1,6,16*0,8);
 152   3            Display_HZ(1,6,16*1,9); 
 153   3      
 154   3            Display_HZ(2,6,16*2,10);
 155   3            Display_HZ(2,6,16*3,11);  
 156   3          }
 157   2          
 158   2          Temperature = ReadTemperature_s()/16;
 159   2          scan_key();
 160   2      
 161   2        }
 162   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    843    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     26       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
